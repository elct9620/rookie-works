// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, or any plugin's
// vendor/assets/javascripts directory can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file. JavaScript code in this file should be added after the last require_* statement.
//
// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details
// about supported directives.
//
//= require rails-ujs
//= require turbolinks
// Giga
//= require jquery3
//= require bootstrap
//= require modernizr
// 3rd-party
//= require select2

$(document).on('turbolinks:load', function() {
  $('.select2').select2({ theme: 'bootstrap' });

  // Tag Manager
  if (typeof window.dataLayer !== "undefined" && window.dataLayer !== null) {
    window.dataLayer.push({
      'event':'turbolinks:load',
      'virtualUrl': event.data.url
    });
  }

  // Facebook FBML
  if (typeof FB !== "undefined" && FB !== null) { // Instance of FacebookSDK
    FB.XFBML.parse();
  }

  // Ckeditor
  $('.ckeditor').each(function() {
    CKEDITOR.replace($(this).attr('id'), { customConfig: "<%= asset_path('ckeditor/config') %>" });
  });
});

$(document).on('turbolinks:before-cache', function() {
  $('.select2-hidden-accessible').select2('destroy');
});

WebFontConfig = {
  google: {
    families: ['Cambo', 'Lato:400,700']
  }
};

(function(d) {
  var wf = d.createElement('script'), s = d.scripts[0];
  wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
  wf.async = true;
  s.parentNode.insertBefore(wf, s);
})(document);
